---
import CategoryBadge from './CategoryBadge.astro';

interface Props {
  title: string;
  description: string;
  date: Date;
  author: string;
  category: 'reviews' | 'news' | 'guides' | 'community';
  slug: string;
  image?: string;
  readingTime?: number;
}

const { title, description, date, author, category, slug, image, readingTime } = Astro.props;

const formattedDate = date.toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
});

const estimatedReadTime = readingTime || 5;
---

<a href={`/blog/${slug}`} class="card card-shine group block overflow-hidden">
  <div class="grid md:grid-cols-2 gap-0">
    <!-- Image -->
    <div class="relative h-64 md:h-80 overflow-hidden">
      {image ? (
        <img
          src={image}
          alt={title}
          class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
        />
      ) : (
        <div class="w-full h-full bg-gradient-to-br from-[--color-accent]/20 via-[--color-bg-tertiary] to-[--color-bg-secondary] flex items-center justify-center">
          <svg class="w-24 h-24 text-[--color-accent]/40" viewBox="0 0 32 32" fill="none">
            <path d="M16 2L28 9V23L16 30L4 23V9L16 2Z" stroke="currentColor" stroke-width="2" fill="none"/>
            <path d="M16 2V30M4 9L28 23M28 9L4 23" stroke="currentColor" stroke-width="1.5" opacity="0.6"/>
            <circle cx="16" cy="16" r="3" fill="currentColor"/>
          </svg>
        </div>
      )}
      <!-- Featured Label -->
      <div class="absolute top-4 left-4 bg-[--color-accent] text-[--color-bg-primary] px-3 py-1 rounded-full text-xs font-semibold">
        Featured
      </div>
    </div>

    <!-- Content -->
    <div class="p-6 md:p-8 flex flex-col justify-center">
      <div class="mb-3">
        <CategoryBadge category={category} size="md" />
      </div>

      <h2 class="text-2xl md:text-3xl font-bold text-[--color-text-primary] mb-3 group-hover:text-[--color-accent] transition-colors">
        {title}
      </h2>

      <p class="text-[--color-text-secondary] mb-6 line-clamp-3">
        {description}
      </p>

      <!-- Author & Meta -->
      <div class="flex items-center gap-4">
        <div class="w-10 h-10 rounded-full bg-[--color-accent]/20 flex items-center justify-center">
          <span class="text-[--color-accent] font-semibold text-sm">
            {author.split(' ').map(n => n[0]).join('').slice(0, 2)}
          </span>
        </div>
        <div>
          <p class="font-medium text-[--color-text-primary]">{author}</p>
          <p class="text-sm text-[--color-text-muted]">
            {formattedDate} Â· {estimatedReadTime} min read
          </p>
        </div>
      </div>

      <!-- Read More -->
      <div class="mt-6">
        <span class="inline-flex items-center gap-2 text-[--color-accent] font-medium group-hover:gap-3 transition-all">
          Read Article
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
          </svg>
        </span>
      </div>
    </div>
  </div>
</a>
