---
interface Props {
  author: string;
  date: Date;
  updated?: Date;
  readingTime?: number;
  showAvatar?: boolean;
}

const { author, date, updated, readingTime, showAvatar = true } = Astro.props;

const authorSlug = author.toLowerCase().replace(/\s+/g, '-');
const authorUrl = `/blog/author/${authorSlug}`;

const formattedDate = date.toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
});

const formattedUpdated = updated?.toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
});
---

<div class="flex items-center gap-3 text-sm text-[--color-text-secondary]">
  {showAvatar && (
    <div class="w-10 h-10 rounded-full bg-[--color-accent]/20 flex items-center justify-center">
      <span class="text-[--color-accent] font-semibold text-sm">
        {author.split(' ').map(n => n[0]).join('').slice(0, 2)}
      </span>
    </div>
  )}
  <div class="flex flex-col">
    <a href={authorUrl} class="font-medium text-[--color-text-primary] hover:text-[--color-accent] transition-colors">{author}</a>
    <div class="flex items-center gap-2 text-[--color-text-muted]">
      <time datetime={date.toISOString()}>{formattedDate}</time>
      {updated && formattedUpdated && (
        <>
          <span>·</span>
          <span>Updated {formattedUpdated}</span>
        </>
      )}
      {readingTime && (
        <>
          <span>·</span>
          <span>{readingTime} min read</span>
        </>
      )}
    </div>
  </div>
</div>
