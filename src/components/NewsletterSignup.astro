---
interface Props {
  variant?: 'inline' | 'card' | 'footer';
  title?: string;
  description?: string;
}

const {
  variant = 'card',
  title = 'Stay Updated',
  description = 'Get mesh network news, guides, and community updates delivered to your inbox.'
} = Astro.props;
---

{variant === 'footer' ? (
  <!-- Footer variant - compact -->
  <div class="newsletter-signup">
    <h4 class="text-sm font-semibold text-[--color-text-primary] mb-3">{title}</h4>
    <form class="flex gap-2" action="https://buttondown.email/api/emails/embed-subscribe/nodakmesh" method="post" target="_blank">
      <input
        type="email"
        name="email"
        placeholder="your@email.com"
        required
        class="flex-1 px-3 py-2 bg-[--color-bg-tertiary] border border-[--color-border] rounded-lg text-sm text-[--color-text-primary] placeholder:text-[--color-text-muted] focus:outline-none focus:border-[--color-accent]"
      />
      <button
        type="submit"
        class="px-4 py-2 bg-[--color-accent] text-white text-sm font-medium rounded-lg hover:bg-[--color-accent-hover] transition-colors"
      >
        Subscribe
      </button>
    </form>
    <p class="text-xs text-[--color-text-muted] mt-2">No spam. Unsubscribe anytime.</p>
  </div>
) : variant === 'inline' ? (
  <!-- Inline variant - for within content -->
  <div class="newsletter-signup my-8 p-6 bg-[--color-bg-tertiary] border border-[--color-border] rounded-lg">
    <div class="flex flex-col sm:flex-row gap-4 items-start sm:items-center">
      <div class="flex-1">
        <h4 class="font-semibold text-[--color-text-primary] mb-1">{title}</h4>
        <p class="text-sm text-[--color-text-secondary]">{description}</p>
      </div>
      <form class="flex gap-2 w-full sm:w-auto" action="https://buttondown.email/api/emails/embed-subscribe/nodakmesh" method="post" target="_blank">
        <input
          type="email"
          name="email"
          placeholder="your@email.com"
          required
          class="flex-1 sm:w-48 px-3 py-2 bg-[--color-bg-secondary] border border-[--color-border] rounded-lg text-sm text-[--color-text-primary] placeholder:text-[--color-text-muted] focus:outline-none focus:border-[--color-accent]"
        />
        <button
          type="submit"
          class="px-4 py-2 bg-[--color-accent] text-white text-sm font-medium rounded-lg hover:bg-[--color-accent-hover] transition-colors whitespace-nowrap"
        >
          Subscribe
        </button>
      </form>
    </div>
  </div>
) : (
  <!-- Card variant - standalone section -->
  <div class="newsletter-signup card p-8 text-center">
    <div class="w-12 h-12 rounded-full bg-[--color-accent]/10 flex items-center justify-center mx-auto mb-4">
      <svg class="w-6 h-6 text-[--color-accent]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
      </svg>
    </div>
    <h3 class="text-xl font-bold text-[--color-text-primary] mb-2">{title}</h3>
    <p class="text-[--color-text-secondary] mb-6 max-w-md mx-auto">{description}</p>
    <form class="flex flex-col sm:flex-row gap-3 max-w-md mx-auto" action="https://buttondown.email/api/emails/embed-subscribe/nodakmesh" method="post" target="_blank">
      <input
        type="email"
        name="email"
        placeholder="your@email.com"
        required
        class="flex-1 px-4 py-3 bg-[--color-bg-tertiary] border border-[--color-border] rounded-lg text-[--color-text-primary] placeholder:text-[--color-text-muted] focus:outline-none focus:border-[--color-accent]"
      />
      <button
        type="submit"
        class="px-6 py-3 bg-[--color-accent] text-white font-medium rounded-lg hover:bg-[--color-accent-hover] transition-colors"
      >
        Subscribe
      </button>
    </form>
    <p class="text-xs text-[--color-text-muted] mt-4">No spam, ever. Unsubscribe anytime.</p>
  </div>
)}
