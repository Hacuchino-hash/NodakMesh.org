---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

// US 915 MHz Band Reference - Common frequencies
const usChannels = [
  { num: "-", freq: 902.0, note: "Start of band" },
  { num: "-", freq: 906.875, note: "Default Meshtastic (LongFast)" },
  { num: "-", freq: 910.525, note: "Default MeshCore (US/CA)" },
  { num: "-", freq: 915.0, note: "Center of band" },
  { num: "-", freq: 928.0, note: "End of band" },
];
---

<Layout
  title="Mesh Network Tools | NodakMesh"
  description="Essential tools for LoRa mesh networking: firmware flashers, mobile apps, configuration tools, range calculator, and US 915MHz channel reference. Everything you need for Meshtastic and MeshCore."
  keywords="Meshtastic flasher, MeshCore flasher, LoRa range calculator, 915 MHz channels, mesh network tools, Meshtastic app, MeshCore app, firmware tools"
>
  <Header slot="header" />

  <div class="pt-24 pb-16">
    <!-- Hero -->
    <section class="py-12 hero-glow">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="max-w-3xl">
          <h1 class="text-4xl sm:text-5xl font-bold text-[--color-text-primary] mb-4">
            Mesh Network <span class="gradient-text">Tools</span>
          </h1>
          <p class="text-xl text-[--color-text-secondary] leading-relaxed">
            Flash firmware, calculate range, and find the right apps for your mesh devices.
          </p>
        </div>
      </div>
    </section>

    <!-- Range Calculator - Featured at top -->
    <section id="calculator" class="py-12 scroll-mt-24">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid lg:grid-cols-2 gap-8 items-start">
          <!-- Calculator -->
          <div class="card p-6">
            <div class="flex items-center gap-3 mb-6">
              <div class="w-10 h-10 rounded-lg bg-[--color-accent]/10 flex items-center justify-center">
                <svg class="w-5 h-5 text-[--color-accent]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
                </svg>
              </div>
              <h2 class="text-xl font-bold text-[--color-text-primary]">LoRa Range Calculator</h2>
            </div>

            <div class="grid sm:grid-cols-2 gap-4 mb-6">
              <div>
                <label for="txPower" class="block text-sm font-medium text-[--color-text-primary] mb-1">
                  TX Power (dBm)
                </label>
                <input type="number" id="txPower" value="22" min="0" max="30"
                  class="w-full px-3 py-2 bg-[--color-bg-tertiary] border border-[--color-border] rounded-lg text-[--color-text-primary] focus:outline-none focus:border-[--color-accent]" />
                <p class="text-xs text-[--color-text-muted] mt-1">Typical: 20-22 dBm</p>
              </div>
              <div>
                <label for="txGain" class="block text-sm font-medium text-[--color-text-primary] mb-1">
                  TX Antenna (dBi)
                </label>
                <input type="number" id="txGain" value="3" min="0" max="20" step="0.5"
                  class="w-full px-3 py-2 bg-[--color-bg-tertiary] border border-[--color-border] rounded-lg text-[--color-text-primary] focus:outline-none focus:border-[--color-accent]" />
                <p class="text-xs text-[--color-text-muted] mt-1">Stock: 2-3 dBi</p>
              </div>
              <div>
                <label for="rxGain" class="block text-sm font-medium text-[--color-text-primary] mb-1">
                  RX Antenna (dBi)
                </label>
                <input type="number" id="rxGain" value="3" min="0" max="20" step="0.5"
                  class="w-full px-3 py-2 bg-[--color-bg-tertiary] border border-[--color-border] rounded-lg text-[--color-text-primary] focus:outline-none focus:border-[--color-accent]" />
                <p class="text-xs text-[--color-text-muted] mt-1">Base: 5-6 dBi</p>
              </div>
              <div>
                <label for="rxSensitivity" class="block text-sm font-medium text-[--color-text-primary] mb-1">
                  RX Sensitivity (dBm)
                </label>
                <input type="number" id="rxSensitivity" value="-137" min="-150" max="-100"
                  class="w-full px-3 py-2 bg-[--color-bg-tertiary] border border-[--color-border] rounded-lg text-[--color-text-primary] focus:outline-none focus:border-[--color-accent]" />
                <p class="text-xs text-[--color-text-muted] mt-1">SF12: -137 dBm</p>
              </div>
            </div>

            <!-- Results -->
            <div class="bg-[--color-bg-tertiary] rounded-lg p-4">
              <div class="flex justify-between items-center mb-2">
                <span class="text-sm text-[--color-text-muted]">Link Budget</span>
                <span class="font-bold text-[--color-text-primary]"><span id="linkBudget">165</span> dB</span>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-sm text-[--color-text-muted]">Estimated Range</span>
                <span class="text-xl font-bold text-[--color-accent]"><span id="rangeKm">92.8</span> km / <span id="rangeMi">57.7</span> mi</span>
              </div>
            </div>
            <p class="text-xs text-[--color-text-muted] mt-3">
              Good LOS with elevated antennas. Urban areas: expect 20-50% of this.
            </p>
          </div>

          <!-- Channel Reference - Compact -->
          <div class="card p-6">
            <div class="flex items-center gap-3 mb-4">
              <div class="w-10 h-10 rounded-lg bg-purple-500/10 flex items-center justify-center">
                <svg class="w-5 h-5 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                </svg>
              </div>
              <div>
                <h2 class="text-xl font-bold text-[--color-text-primary]">US 915 MHz Channels</h2>
                <p class="text-sm text-[--color-text-muted]">902-928 MHz ISM Band</p>
              </div>
            </div>

            <div class="overflow-y-auto max-h-64 rounded-lg border border-[--color-border]">
              <table class="w-full text-sm">
                <thead class="sticky top-0 bg-[--color-bg-tertiary]">
                  <tr>
                    <th class="px-3 py-2 text-left font-semibold text-[--color-text-primary]">Ch</th>
                    <th class="px-3 py-2 text-left font-semibold text-[--color-text-primary]">Freq (MHz)</th>
                    <th class="px-3 py-2 text-left font-semibold text-[--color-text-primary]"></th>
                  </tr>
                </thead>
                <tbody>
                  {usChannels.map((ch, idx) => (
                    <tr class={`border-t border-[--color-border] ${ch.note.includes('Default') ? 'bg-[--color-accent]/10' : ''}`}>
                      <td class="px-3 py-1.5 text-[--color-text-primary] font-mono">{ch.num}</td>
                      <td class="px-3 py-1.5 text-[--color-text-secondary] font-mono">{ch.freq.toFixed(2)}</td>
                      <td class="px-3 py-1.5">
                        {ch.note && (
                          <span class={`text-xs ${ch.note.includes('Default') ? 'text-[--color-accent] font-medium' : 'text-[--color-text-muted]'}`}>
                            {ch.note}
                          </span>
                        )}
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
            <p class="text-xs text-[--color-text-muted] mt-3">
              Meshtastic: 906.875 MHz (LongFast) â€¢ MeshCore: 910.525 MHz (US/CA)
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Quick Links Grid -->
    <section class="py-12 bg-[--color-bg-secondary]">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2 class="text-2xl font-bold text-[--color-text-primary] mb-8 text-center">External Tools & Apps</h2>

        <!-- Platform Tabs -->
        <div class="grid md:grid-cols-2 gap-8">
          <!-- Meshtastic Column -->
          <div>
            <div class="flex items-center gap-2 mb-4">
              <div class="w-8 h-8 rounded-lg bg-green-500/10 flex items-center justify-center">
                <svg class="w-4 h-4 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0" />
                </svg>
              </div>
              <h3 class="text-lg font-semibold text-[--color-text-primary]">Meshtastic</h3>
            </div>

            <div class="space-y-3">
              <a href="https://flasher.meshtastic.org" target="_blank" rel="noopener" class="card p-4 flex items-center gap-4 hover:border-green-500/50 transition-colors group">
                <div class="w-10 h-10 rounded-lg bg-green-500/10 flex items-center justify-center flex-shrink-0">
                  <svg class="w-5 h-5 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                  </svg>
                </div>
                <div class="flex-1 min-w-0">
                  <p class="font-medium text-[--color-text-primary] group-hover:text-green-400 transition-colors">Web Flasher</p>
                  <p class="text-sm text-[--color-text-muted] truncate">Flash firmware from your browser</p>
                </div>
                <svg class="w-4 h-4 text-[--color-text-muted] flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                </svg>
              </a>

              <a href="https://client.meshtastic.org" target="_blank" rel="noopener" class="card p-4 flex items-center gap-4 hover:border-green-500/50 transition-colors group">
                <div class="w-10 h-10 rounded-lg bg-green-500/10 flex items-center justify-center flex-shrink-0">
                  <svg class="w-5 h-5 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                  </svg>
                </div>
                <div class="flex-1 min-w-0">
                  <p class="font-medium text-[--color-text-primary] group-hover:text-green-400 transition-colors">Web Client</p>
                  <p class="text-sm text-[--color-text-muted] truncate">Configure via browser</p>
                </div>
                <svg class="w-4 h-4 text-[--color-text-muted] flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                </svg>
              </a>

              <div class="flex gap-3">
                <a href="https://play.google.com/store/apps/details?id=com.geeksville.mesh" target="_blank" rel="noopener" class="card p-3 flex-1 flex items-center gap-3 hover:border-green-500/50 transition-colors group">
                  <svg class="w-6 h-6 text-green-400" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M17.523 15.341c-.5 0-.91.41-.91.91s.41.91.91.91.91-.41.91-.91-.41-.91-.91-.91zm-11.046 0c-.5 0-.91.41-.91.91s.41.91.91.91.91-.41.91-.91-.41-.91-.91-.91zm11.405-6.02l1.96-3.392a.41.41 0 00-.147-.562.41.41 0 00-.562.147l-1.985 3.435A12.075 12.075 0 0012 8.07c-1.85 0-3.592.422-5.149 1.18L4.866 5.814a.41.41 0 00-.562-.147.41.41 0 00-.147.562l1.96 3.392A11.216 11.216 0 001 17.878h22c0-3.294-1.422-6.263-3.678-8.316l-.44-.241z"/>
                  </svg>
                  <span class="font-medium text-[--color-text-primary] text-sm group-hover:text-green-400">Android</span>
                </a>
                <a href="https://apps.apple.com/app/meshtastic/id1586432531" target="_blank" rel="noopener" class="card p-3 flex-1 flex items-center gap-3 hover:border-green-500/50 transition-colors group">
                  <svg class="w-6 h-6 text-gray-400" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/>
                  </svg>
                  <span class="font-medium text-[--color-text-primary] text-sm group-hover:text-green-400">iOS</span>
                </a>
              </div>
            </div>
          </div>

          <!-- MeshCore Column -->
          <div>
            <div class="flex items-center gap-2 mb-4">
              <div class="w-8 h-8 rounded-lg bg-blue-500/10 flex items-center justify-center">
                <svg class="w-4 h-4 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" />
                </svg>
              </div>
              <h3 class="text-lg font-semibold text-[--color-text-primary]">MeshCore</h3>
            </div>

            <div class="space-y-3">
              <a href="https://flasher.meshcore.co.uk" target="_blank" rel="noopener" class="card p-4 flex items-center gap-4 hover:border-blue-500/50 transition-colors group">
                <div class="w-10 h-10 rounded-lg bg-blue-500/10 flex items-center justify-center flex-shrink-0">
                  <svg class="w-5 h-5 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                  </svg>
                </div>
                <div class="flex-1 min-w-0">
                  <p class="font-medium text-[--color-text-primary] group-hover:text-blue-400 transition-colors">Web Flasher</p>
                  <p class="text-sm text-[--color-text-muted] truncate">Flash Companion, Repeater, or Room Server</p>
                </div>
                <svg class="w-4 h-4 text-[--color-text-muted] flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                </svg>
              </a>

              <a href="https://config.meshcore.dev" target="_blank" rel="noopener" class="card p-4 flex items-center gap-4 hover:border-blue-500/50 transition-colors group">
                <div class="w-10 h-10 rounded-lg bg-blue-500/10 flex items-center justify-center flex-shrink-0">
                  <svg class="w-5 h-5 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z" />
                  </svg>
                </div>
                <div class="flex-1 min-w-0">
                  <p class="font-medium text-[--color-text-primary] group-hover:text-blue-400 transition-colors">Config Generator</p>
                  <p class="text-sm text-[--color-text-muted] truncate">Generate QR codes & config links</p>
                </div>
                <svg class="w-4 h-4 text-[--color-text-muted] flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                </svg>
              </a>

              <div class="flex gap-3">
                <a href="https://play.google.com/store/apps/details?id=nz.meshcore.app" target="_blank" rel="noopener" class="card p-3 flex-1 flex items-center gap-3 hover:border-blue-500/50 transition-colors group">
                  <svg class="w-6 h-6 text-green-400" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M17.523 15.341c-.5 0-.91.41-.91.91s.41.91.91.91.91-.41.91-.91-.41-.91-.91-.91zm-11.046 0c-.5 0-.91.41-.91.91s.41.91.91.91.91-.41.91-.91-.41-.91-.91-.91zm11.405-6.02l1.96-3.392a.41.41 0 00-.147-.562.41.41 0 00-.562.147l-1.985 3.435A12.075 12.075 0 0012 8.07c-1.85 0-3.592.422-5.149 1.18L4.866 5.814a.41.41 0 00-.562-.147.41.41 0 00-.147.562l1.96 3.392A11.216 11.216 0 001 17.878h22c0-3.294-1.422-6.263-3.678-8.316l-.44-.241z"/>
                  </svg>
                  <span class="font-medium text-[--color-text-primary] text-sm group-hover:text-blue-400">Android</span>
                </a>
                <a href="https://apps.apple.com/app/meshcore/id6740261825" target="_blank" rel="noopener" class="card p-3 flex-1 flex items-center gap-3 hover:border-blue-500/50 transition-colors group">
                  <svg class="w-6 h-6 text-gray-400" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/>
                  </svg>
                  <span class="font-medium text-[--color-text-primary] text-sm group-hover:text-blue-400">iOS</span>
                </a>
                <a href="https://app.meshcore.nz" target="_blank" rel="noopener" class="card p-3 flex-1 flex items-center gap-3 hover:border-blue-500/50 transition-colors group">
                  <svg class="w-6 h-6 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9" />
                  </svg>
                  <span class="font-medium text-[--color-text-primary] text-sm group-hover:text-blue-400">Web</span>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Developer Tools - Collapsed/Expandable -->
    <section class="py-12">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <details class="card overflow-hidden group">
          <summary class="p-6 cursor-pointer flex items-center justify-between hover:bg-[--color-bg-tertiary]/50 transition-colors">
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 rounded-lg bg-orange-500/10 flex items-center justify-center">
                <svg class="w-5 h-5 text-orange-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
                </svg>
              </div>
              <div>
                <h3 class="font-semibold text-[--color-text-primary]">Developer Tools</h3>
                <p class="text-sm text-[--color-text-muted]">CLI tools & libraries for building mesh applications</p>
              </div>
            </div>
            <svg class="w-5 h-5 text-[--color-text-muted] transition-transform group-open:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </summary>
          <div class="px-6 pb-6 pt-2 border-t border-[--color-border]">
            <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-4 mt-4">
              <a href="https://github.com/meshtastic/python" target="_blank" rel="noopener" class="p-4 bg-[--color-bg-tertiary] rounded-lg hover:bg-[--color-border] transition-colors group">
                <p class="font-medium text-[--color-text-primary] mb-1 group-hover:text-[--color-accent]">Meshtastic Python</p>
                <p class="text-xs text-[--color-text-muted]">CLI & Python library</p>
              </a>
              <a href="https://github.com/meshtastic/js" target="_blank" rel="noopener" class="p-4 bg-[--color-bg-tertiary] rounded-lg hover:bg-[--color-border] transition-colors group">
                <p class="font-medium text-[--color-text-primary] mb-1 group-hover:text-[--color-accent]">Meshtastic JS</p>
                <p class="text-xs text-[--color-text-muted]">TypeScript library</p>
              </a>
              <a href="https://github.com/liamcottle/meshcore.js" target="_blank" rel="noopener" class="p-4 bg-[--color-bg-tertiary] rounded-lg hover:bg-[--color-border] transition-colors group">
                <p class="font-medium text-[--color-text-primary] mb-1 group-hover:text-[--color-accent]">meshcore.js</p>
                <p class="text-xs text-[--color-text-muted]">JavaScript library</p>
              </a>
              <a href="https://github.com/liamcottle/meshcore-cli" target="_blank" rel="noopener" class="p-4 bg-[--color-bg-tertiary] rounded-lg hover:bg-[--color-border] transition-colors group">
                <p class="font-medium text-[--color-text-primary] mb-1 group-hover:text-[--color-accent]">meshcore-cli</p>
                <p class="text-xs text-[--color-text-muted]">Node.js CLI</p>
              </a>
            </div>
          </div>
        </details>
      </div>
    </section>

    <!-- CTA -->
    <section class="py-8">
      <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <p class="text-[--color-text-secondary] mb-4">
          Need help getting started?
        </p>
        <div class="flex flex-wrap gap-4 justify-center">
          <a href="/meshtastic/getting-started" class="btn-primary">Meshtastic Guide</a>
          <a href="/meshcore/getting-started" class="btn-secondary">MeshCore Guide</a>
        </div>
      </div>
    </section>
  </div>

  <Footer slot="footer" />
</Layout>

<script>
  // Range Calculator Logic
  const txPowerInput = document.getElementById('txPower') as HTMLInputElement;
  const txGainInput = document.getElementById('txGain') as HTMLInputElement;
  const rxGainInput = document.getElementById('rxGain') as HTMLInputElement;
  const rxSensitivityInput = document.getElementById('rxSensitivity') as HTMLInputElement;
  const linkBudgetEl = document.getElementById('linkBudget');
  const rangeKmEl = document.getElementById('rangeKm');
  const rangeMiEl = document.getElementById('rangeMi');

  function calculateRange() {
    const txPower = parseFloat(txPowerInput?.value || '22');
    const txGain = parseFloat(txGainInput?.value || '3');
    const rxGain = parseFloat(rxGainInput?.value || '3');
    const rxSensitivity = parseFloat(rxSensitivityInput?.value || '-137');

    // Link budget = TX power + TX gain + RX gain - RX sensitivity
    const linkBudget = txPower + txGain + rxGain - rxSensitivity;

    // Free-space path loss formula: FSPL (dB) = 20*log10(d_km) + 20*log10(f_MHz) + 32.44
    // For 915 MHz: 20*log10(915) + 32.44 = 59.23 + 32.44 = 91.67
    const frequencyConstant = 91.67;
    const theoreticalRangeKm = Math.pow(10, (linkBudget - frequencyConstant) / 20);

    // Apply realistic derating for good LOS conditions
    const realisticFactor = 0.02;
    const rangeKm = theoreticalRangeKm * realisticFactor;
    const rangeMi = rangeKm * 0.621371;

    if (linkBudgetEl) linkBudgetEl.textContent = linkBudget.toFixed(0);
    if (rangeKmEl) rangeKmEl.textContent = rangeKm.toFixed(1);
    if (rangeMiEl) rangeMiEl.textContent = rangeMi.toFixed(1);
  }

  [txPowerInput, txGainInput, rxGainInput, rxSensitivityInput].forEach(input => {
    input?.addEventListener('input', calculateRange);
  });

  calculateRange();
</script>
